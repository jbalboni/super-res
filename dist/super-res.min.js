function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("q"),require("superagent"),require("methods"),require("cache-manager")):"function"==typeof define&&define.amd?define(["q","superagent","methods","cache-manager"],r):e.superRes=r(e.Q,e.sa,e.methods,e.cacheManager)}(this,function(e,r,t,n){"use strict";function a(){for(var e={},r=arguments.length,t=Array(r),n=0;r>n;n++)t[n]=arguments[n];return t.reduce(function(e,r){if(r)for(var t in r)"object"==typeof r[t]&&null!==r[t]?Array.isArray(r[t])?(Array.isArray(e[t])||(e[t]=[]),e[t]=e[t].concat(r[t])):(("object"!=typeof e[t]||null===e[t]||Array.isArray(e[t]))&&(e[t]={}),h(e[t],r[t])):void 0!==r[t]&&(e[t]=r[t]);return e},e),e}function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"%20").replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function i(e,r,t){for(var n in e)e.hasOwnProperty(n)&&r.call(t,e[n],n,e);return e}function u(e,r){var t={},n=void 0,a=void 0,u=void 0;return i(e.split(/\W/),function(r){if("hasOwnProperty"===r)throw new Error("badname: hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(r)&&r&&new RegExp("(^|[^\\\\]):"+r+"(\\W|$)").test(e)&&(t[r]=!0)}),e=e.replace(/\\:/g,":"),r=r||{},i(t,function(t,a){n=r[a],"undefined"!=typeof n&&null!==n?(u=o(n),e=e.replace(new RegExp(":"+a+"(\\W|$)","g"),function(e,r){return u+r})):e=e.replace(new RegExp("(/?):"+a+"(\\W|$)","g"),function(e,r,t){return"/"==t.charAt(0)?t:r+t})}),e=e.replace(/\/+$/,"")||"/",e=e.replace(/\/\.(?=\w+($|\?))/,"."),e=e.replace(/\/\\\./,"/."),i(r,function(e,r){t[r]||(a||(a={}),a[r]=e)}),{url:e,query:a}}function c(e,r,t){return e+"_"+("string"==typeof r?r:JSON.stringify(r||{}))+"_"+("string"==typeof t?t:JSON.stringify(t||{}))}function s(t,n,o){o=a(d,o);var i=r(t,n);i.accept(o.responseType),i.set(o.headers),o.timeout?i.timeout(o.timeout):i.clearTimeout(),o.withCredentials&&i.withCredentials(),1==o.cache&&(o.cache=p);var u=i.end;return i.end=function(r){var t=this,n=void 0;o.cache&&(n=c(this.url,this._query,this._data));var a=function(){if(i._data&&"object"==typeof i._data)try{i._data=o.transformRequest.reduce(function(e,r){return r.call(i,e,i.header)},i._data)}catch(a){return o.catchRequestError.reduce(function(e,r){return e["catch"](r)},e.Promise(function(e,r){return r(a)})).then(r,r),t}return u.call(i,function(t,a){if(t)o.catchResponseError.reduce(function(e,r){return e["catch"](r)},e.Promise(function(e,r){return r(t)})).then(r,r);else{try{a.body=o.transformResponse.reduce(function(e,r){return r.call(a,e)},a.body),o.cache&&o.cache.set(n,a)}catch(i){return e(i).then(r)}e.spread([null,a],r)}})};return o.cache&&"GET"===this.method?void o.cache.get(n,function(n,o){return n||o?(e.spread([n,o],r),t):a()}):a()},i}function f(e,r){return e&&this.query(e),null}function l(e,r,t){var n={},a=new y(e,r,v({},t));return n.get=a.makeRequest.bind(a),n.query=n.get,a=new y(e,r,v({},t,{method:"POST"})),n.save=a.makeRequest.bind(a),a=new y(e,r,v({},t,{method:"PUT"})),n.put=a.makeRequest.bind(a),a=new y(e,r,v({},t,{method:"DELETE"})),n.remove=a.makeRequest.bind(a),n["delete"]=n.remove,n}var h=h||require("object.assign"),d={responseType:"json",headers:{},transformRequest:[],catchRequestError:[],transformResponse:[],catchResponseError:[],withCredentials:!1,cache:null},p=n.caching({store:"memory",max:100,ttl:1200});t.forEach(function(e){var r="delete"==e?"del":e;e=e.toUpperCase(),Object.defineProperty(s,r,{value:function(r,t,n,a){"function"==typeof t&&(a=n,n=t,t=null);var o=s(e,r,a);return t&&o.send(t),n&&o.end(n),o},enumerable:!0})}),Object.defineProperty(s,"config",{value:d});var m=m||require("object.assign"),g={method:"GET",transformRequest:[]},y=function(){function r(e,t,n){_classCallCheck(this,r),this.config=a({url:e},g,n),"GET"===this.config.method?(this.config.transformRequest||(this.config.transformRequest=[]),this.config.transformRequest.push(f)):("POST"===this.config.method||"PUT"===this.config.method||"PATCH"===this.config.method)&&(this.hasData=!0),this.defaultParams=t,this.extraParams={};for(var o in t){var i=t[o];if("function"==typeof i)this.extraParams[o]=i;else{if("string"!=typeof i||"@"!==i[0])continue;this.extraParams[o]=i.slice(1)}delete this.defaultParams[o]}}return _createClass(r,[{key:"buildRequest",value:function(e,r){var t=this.config.method.toLowerCase(),n=u(this.config.url,e),a=n.url,o=n.query,i=s["delete"===t?"del":t](a,null,null,this.config);return o&&i.query(o),r&&i.send(r),i}},{key:"makeRequest",value:function(r,t){var n=e.defer();1==arguments.length&&this.hasData&&(t=r,r=void 0);var a={};for(var o in this.extraParams){var i=this.extraParams[o],u=void 0;u="function"==typeof i?i():t[i],u&&(a[o]=u)}var c=m({},this.defaultParams,a,r);return this.buildRequest(c,t).end(function(e,r){e?n.reject(e):n.resolve(r.body)}),n.promise}}]),r}(),v=v||require("object.assign"),q={};q.resource=function(e,r,t,n){var a=l(e,r,n);return t&&Object.getOwnPropertyNames(t).forEach(function(o){var i=new y(e,r,v({},n,t[o]));a[o]=function(){i.makeRequest.apply(i,arguments)}}),a},q.request=s,q.config=s.config,q.promiseWrapper=function(e){return function(r){var t=v({},r);return Object.getOwnPropertyNames(r).forEach(function(r){var n=t[r];t[r]=function(){for(var r=arguments.length,a=Array(r),o=0;r>o;o++)a[o]=arguments[o];var i=n.apply(t,a);return e(i)}}),t}};var b=q;return b});
//# sourceMappingURL=super-res.min.js.map